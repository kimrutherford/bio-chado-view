# SmallRNA config file
name: SmallRNA::Web
long_name: SmallRNA Tracking
pipeline_directory: /data/pipeline
data_sub_directory: process
authentication:
  default_realm: 'friends'
  realms:
    friends:
      credential:
        class: 'Password'
        password_field: 'password'
        password_type: 'clear'
      store:
        class: DBIx::Class
        user_class: DB::Person
        id_field: identifier
# There needs to be a class_info entry for each class that will be displayed.
# Class flags:
#   editable: an edit link and edit page will be created for this class
#   display_field: if provided, the value in this field will be used whenever
#                  objects of this class need to be displayed as a name, eg.
#                  in a select box
#   field_info_list: a list of field_infos for this class
# Field infomation:
#   The field_info_list, if provided is used to decide which columns to
#   display when listing a class or showing an object.
#   Field flags:
#     - field_label: the description to display for the field
#     - editable: if set and true, the field is editable
#     - field_conf:
#        - if set, and the value matches /^\w[\w\d]+$/, use this value instead
#          of the field_label as the database column to retrieve the data from
#        - if set, and the value does not match /^\w[\w\d]+$/, evaluate as
#          perl code for each object / row to be displayed.  During evaluation,
#          $object will be set to the current row.  Any HTML characters will be
#          passed through to the user
#        - if not set, the field_label is used to choose the database
#          column that holds the value for this field
class_info:
  cv:
    display_field: name
  cvterm:
    display_field: name
  organisation:
    display_field: name
  organism:
    display_field: full_name
  person:
    display_field: user_name
  sample:
    editable: 1
    display_field: name
    field_info_list:
      - field_label: name
        editable: 1
      - field_label: description
        editable: 1
      - field_label: ecotype
        editable: 1
      - field_label: project
        field_conf: pipeproject
        editable: 1
      - field_label: genotype
        editable: 1
      - field_label: protocol
        editable: 1
      - field_label: molecule
        field_conf: molecule_type
        editable: 1
        values_constraint: 'cv->name = "tracking molecule types"'
      - field_label: treatment
        field_conf: treatment_type
        editable: 1
        values_constraint: 'cv->name = "tracking treatment types"'
      - field_label: fractionation
        field_conf: fractionation_type
        editable: 1
        values_constraint: 'cv->name = "tracking fractionation types"'
      - field_label: tissue
        editable: 1
  ecotype:
    display_field: long_description
  genotype:
    display_field: description
  tissue:
    display_field: description
  pipeproject:
    display_field: name
  process_conf:
    display_field: long_description
  pipeprocess:
    display_field: description
  barcode:
    display_field: identifier
  pipedata:
    display_field: file_name
  sequencingrun:
    display_field: identifier
  sequencing_sample:
    display_field: name
  coded_sample:
    editable: 1
    display_field: description
    field_info_list:
      - field_label: description
        editable: 1
      - field_label: run type
        field_conf: coded_sample_type
        values_constraint: 'cv->name = "tracking coded sample types"'
        editable: 1
      - field_label: sample
        editable: 1
      - field_label: barcode
        editable: 1
      - field_label: sequencing run
        field_conf: sequencingrun
        editable: 1
"Model::SmallRNAModel":
  schema_class: 'SmallRNA::DB'
  connect_info:
     - "dbi:Pg:dbname=pipeline-dev-kmr44;host=hydrogen"
     - 'kmr44'
     - 'kmr'
plugins:
  object_page:
    sample:
      - name: Size distribution graph
        path: /plugins/sizedists.mhtml
programs:
  ssaha:
    path: /applications/ssaha_v31c_amd64/ssaha_v31c_amd64
    root: /data/public_data
    organisms:
      Arabidopsis_thaliana:
        database_files:
          nuclear_genome: arabidopsis/TAIR_8/arabidopsis_nuclear_genome
      Carmovirus_turnip_crinkle_virus:
        database_files:
          genome: TCV/TCV.fa
      Oryza_sativa:
        database_files:
          genome: /data/public_data/rice/Oryza_sativa/IRGSP_Build5/nuclear_genome.fasta
      Benyvirus_rice_stripe_virus:
        database_files:
          genome: /data/public_data/viruses/Benyvirus/rice_stripe_virus_isolate_Zhejiang.fasta
      Chlamydomonas_reinhardtii:
        database_files:
          nuclear_genome: chlamydomonas/20090120_chlamy_assembly4/C_reinhardtii.main_genome.scaffolds_plus_unmapped_scaffolds.fasta
