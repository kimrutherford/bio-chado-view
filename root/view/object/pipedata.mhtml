<%args>
$object
$type
</%args>

<div>
<& /view/field_list.mhtml, object => $object,
     field_labels => [qw(file_name format_type content_type)] &>
</div>

<div>
  <a href="/data/<% $object->file_name() %>">view/download file contents</a>
</div>


<div>
  <& /view/list.mhtml, type => 'pipeprocess', rs => $prev_pipeprocess_rs,
    list_title => 'Process that generated this data' &></td>
</div>
<div>
  <& /view/list.mhtml, type => 'pipeprocess', rs => $next_pipeprocess_rs,
    list_title => 'Processes that use this data as input' &></td>
</div>
<div>
  <& /view/list.mhtml, type => 'sample', rs => $samples_rs,
    list_title => "The sample$plu that (ultimately) generated this data" &></td>
</div>

<%init>
my $next_pipeprocess_rs =
  $object->pipeprocess_in_pipedatas()->search_related('pipeprocess');
my $prev_pipeprocess_rs = $object->search_related('generating_pipeprocess');
my $samples_rs =
  $object->sample_pipedatas()->search_related('sample');
my $samples_count = $samples_rs->count();
my $plu = $samples_count !=  1 ? 's' : '';
</%init>

